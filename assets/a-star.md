# A star 算法

A* 算法通过估价函数缩小搜索空间，只需要搜很少的路径，就可以求出从起点到终点的最短路径。

前提是**起点到终点有解**，不然 A* 算法会搜索所有空间，由于它使用的是优先队列，操作时间复杂度为 O(logN)，大于普通队列的 O(1)，是要比朴素 BFS 垃的。

A* 算法应用场景是搜索空间非常大的时候，明显用在这不合适。（牛刀小用，问题不大:)）

## 伪代码

```go
for pq.Len() != 0 {
   t <- 优先队列的队头（小根堆）：里面存的是【从起点到当前点的真实距离】+【从当前点到终点的估计距离】
   当终点第一次出队时，break
   for t 的所有临边
       将临边入队
}
```

注：
- 真实距离，两个点之间的最小距离
- 估计距离，两个点之间估计的最小距离

## 正确性

当**估计距离 <= 真实距离**时，A* 算法正确，终点出队取到的是最小距离

### 反证法

> 假设终点出队取到的不是最小距离，d<sub>to</sub> > d<sub>最优</sub>

队列中一定存在最优路径上的点 m，再不济起点也是，记 d(m) 为起点到 m 的距离，g(m) 为 m 到终点的估计距离，f(m) 为 m 到终点的真实距离

d(m) + g(m) <= d(m) + f(m) = d<sub>最优</sub>

可以得到

d(m) + g(m) <= d<sub>最优</sub> < d<sub>to</sub>

此时矛盾，因为优先队列是小根堆，出队为队列中的最小值，但有比当前出队元素（d<sub>to</sub>）更小的元素（d(m) + g(m)）

所以假设不成立，终点出队时取到的一定是最小距离

## 思考题

第一次出队取到最小距离只对终点成立 by yxc

why?